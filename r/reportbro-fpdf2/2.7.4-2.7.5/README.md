# Comparing `tmp/reportbro_fpdf2-2.7.4-py2.py3-none-any.whl.zip` & `tmp/reportbro_fpdf2-2.7.5-py2.py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,18 +1,18 @@
-Zip file size: 194972 bytes, number of entries: 34
+Zip file size: 195138 bytes, number of entries: 34
 -rw-rw-r--  2.0 unx     2286 b- defN 23-Dec-13 12:53 fpdf/__init__.py
 -rw-rw-r--  2.0 unx     3547 b- defN 23-Dec-13 11:05 fpdf/actions.py
 -rw-rw-r--  2.0 unx     5680 b- defN 23-Dec-13 12:53 fpdf/annotations.py
 -rw-rw-r--  2.0 unx     2875 b- defN 23-Dec-13 12:53 fpdf/deprecation.py
 -rw-rw-r--  2.0 unx   148464 b- defN 23-Dec-13 12:53 fpdf/drawing.py
 -rw-rw-r--  2.0 unx    21772 b- defN 23-Dec-13 12:53 fpdf/encryption.py
 -rw-rw-r--  2.0 unx    27201 b- defN 23-Dec-13 12:53 fpdf/enums.py
 -rw-rw-r--  2.0 unx     1760 b- defN 22-Aug-09 20:34 fpdf/errors.py
--rw-rw-r--  2.0 unx    60115 b- defN 24-Jan-15 15:48 fpdf/fonts.py
--rw-rw-r--  2.0 unx   203631 b- defN 24-Jan-15 14:08 fpdf/fpdf.py
+-rw-rw-r--  2.0 unx    60769 b- defN 24-Apr-29 10:46 fpdf/fonts.py
+-rw-rw-r--  2.0 unx   203659 b- defN 24-Apr-29 10:38 fpdf/fpdf.py
 -rw-rw-r--  2.0 unx    10420 b- defN 23-Dec-13 12:53 fpdf/graphics_state.py
 -rw-rw-r--  2.0 unx    31475 b- defN 23-Dec-13 12:53 fpdf/html.py
 -rw-rw-r--  2.0 unx     2981 b- defN 23-Dec-13 12:53 fpdf/image_datastructures.py
 -rw-rw-r--  2.0 unx    21224 b- defN 23-Dec-13 12:53 fpdf/image_parsing.py
 -rw-rw-r--  2.0 unx    24806 b- defN 23-Dec-13 12:53 fpdf/line_break.py
 -rw-rw-r--  2.0 unx    12348 b- defN 23-Dec-13 12:53 fpdf/linearization.py
 -rw-rw-r--  2.0 unx     3283 b- defN 23-Dec-13 12:53 fpdf/outline.py
@@ -24,13 +24,13 @@
 -rw-rw-r--  2.0 unx    37361 b- defN 23-Dec-13 12:53 fpdf/svg.py
 -rw-rw-r--  2.0 unx    12044 b- defN 23-Dec-13 12:53 fpdf/syntax.py
 -rw-rw-r--  2.0 unx    27900 b- defN 23-Dec-13 12:53 fpdf/table.py
 -rw-rw-r--  2.0 unx    22574 b- defN 23-Dec-13 12:53 fpdf/template.py
 -rw-rw-r--  2.0 unx    21895 b- defN 23-Dec-13 12:53 fpdf/text_region.py
 -rw-rw-r--  2.0 unx     4446 b- defN 23-Dec-13 11:05 fpdf/transitions.py
 -rw-rw-r--  2.0 unx     7851 b- defN 23-Dec-13 12:53 fpdf/util.py
--rw-rw-r--  2.0 unx     7632 b- defN 24-Jan-15 18:00 reportbro_fpdf2-2.7.4.dist-info/LICENSE
--rw-rw-r--  2.0 unx    55176 b- defN 24-Jan-15 18:00 reportbro_fpdf2-2.7.4.dist-info/METADATA
--rw-rw-r--  2.0 unx      110 b- defN 24-Jan-15 18:00 reportbro_fpdf2-2.7.4.dist-info/WHEEL
--rw-rw-r--  2.0 unx        5 b- defN 24-Jan-15 18:00 reportbro_fpdf2-2.7.4.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2570 b- defN 24-Jan-15 18:00 reportbro_fpdf2-2.7.4.dist-info/RECORD
-34 files, 836475 bytes uncompressed, 191024 bytes compressed:  77.2%
+-rw-rw-r--  2.0 unx     7632 b- defN 24-Apr-29 11:06 reportbro_fpdf2-2.7.5.dist-info/LICENSE
+-rw-rw-r--  2.0 unx    55176 b- defN 24-Apr-29 11:06 reportbro_fpdf2-2.7.5.dist-info/METADATA
+-rw-rw-r--  2.0 unx      110 b- defN 24-Apr-29 11:06 reportbro_fpdf2-2.7.5.dist-info/WHEEL
+-rw-rw-r--  2.0 unx        5 b- defN 24-Apr-29 11:06 reportbro_fpdf2-2.7.5.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2570 b- defN 24-Apr-29 11:06 reportbro_fpdf2-2.7.5.dist-info/RECORD
+34 files, 837157 bytes uncompressed, 191190 bytes compressed:  77.2%
```

## zipnote {}

```diff
@@ -81,23 +81,23 @@
 
 Filename: fpdf/transitions.py
 Comment: 
 
 Filename: fpdf/util.py
 Comment: 
 
-Filename: reportbro_fpdf2-2.7.4.dist-info/LICENSE
+Filename: reportbro_fpdf2-2.7.5.dist-info/LICENSE
 Comment: 
 
-Filename: reportbro_fpdf2-2.7.4.dist-info/METADATA
+Filename: reportbro_fpdf2-2.7.5.dist-info/METADATA
 Comment: 
 
-Filename: reportbro_fpdf2-2.7.4.dist-info/WHEEL
+Filename: reportbro_fpdf2-2.7.5.dist-info/WHEEL
 Comment: 
 
-Filename: reportbro_fpdf2-2.7.4.dist-info/top_level.txt
+Filename: reportbro_fpdf2-2.7.5.dist-info/top_level.txt
 Comment: 
 
-Filename: reportbro_fpdf2-2.7.4.dist-info/RECORD
+Filename: reportbro_fpdf2-2.7.5.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## fpdf/fonts.py

```diff
@@ -113,15 +113,15 @@
         self.emphasis = TextEmphasis.coerce(style)
 
     def get_text_width(self, text, font_size_pt, _):
         return (len(text), sum(self.cw[c] for c in text) * font_size_pt * 0.001)
 
     # Disabling this check - method kept as is to have same method/signature on CoreConf and TTFFont:
     # pylint: disable=no-self-use
-    def encode_text(self, text):
+    def encode_text(self, text, encode_error_handling):
         return f"({escape_parens(text)}) Tj"
 
     def __repr__(self):
         return f"CoreFont(i={self.i}, fontkey={self.fontkey})"
 
 
 class TTFFont:
@@ -139,14 +139,15 @@
         "fontkey",
         "emphasis",
         "scale",
         "subset",
         "cmap",
         "ttfont",
         "missing_glyphs",
+        "qm_char_code",
     )
 
     def __init__(self, fpdf, font_file_path, fontkey, style):
         self.i = len(fpdf.fonts) + 1
         self.type = "TTF"
         self.ttffile = font_file_path
         self.fontkey = fontkey
@@ -226,14 +227,16 @@
             sbarr += fpdf.str_alias_nb_pages
 
         self.name = re.sub("[ ()]", "", self.ttfont["name"].getBestFullName())
         self.up = round(self.ttfont["post"].underlinePosition * self.scale)
         self.ut = round(self.ttfont["post"].underlineThickness * self.scale)
         self.emphasis = TextEmphasis.coerce(style)
         self.subset = SubsetMap(self, [ord(char) for char in sbarr])
+        # char code for question mark, needed when missing character is replaced with "?"
+        self.qm_char_code = self.subset.pick(ord('?'))
 
     def __repr__(self):
         return f"TTFFont(i={self.i}, fontkey={self.fontkey})"
 
     def close(self):
         self.ttfont.close()
         self.hbfont = None
@@ -288,24 +291,31 @@
             buf.script = text_shaping_parms["script"]
             buf.language = text_shaping_parms["language"]
         else:
             buf.guess_segment_properties()
         hb.shape(self.hbfont, buf, features)
         return buf.glyph_infos, buf.glyph_positions
 
-    def encode_text(self, text):
+    def encode_text(self, text, encode_error_handling):
         txt_mapped = ""
         for char in text:
             uni = ord(char)
             # Instead of adding the actual character to the stream its code is
             # mapped to a position in the font's subset
             char_code = self.subset.pick(uni)
             if char_code is None:
-                raise FPDFException(f"Character {char} is not contained in current font")
-            txt_mapped += chr(char_code)
+                if encode_error_handling == 'strict':
+                    raise FPDFException(f"Character {char} is not contained in current font")
+                elif encode_error_handling == 'replace':
+                    if self.qm_char_code is None:
+                        raise FPDFException(f"? (to replace missing character {char}) is not contained in current font")
+                    txt_mapped += chr(self.qm_char_code)
+                # ignore character with encode_error_handling == 'ignore'
+            else:
+                txt_mapped += chr(char_code)
         return f'({escape_parens(txt_mapped.encode("utf-16-be").decode("latin-1"))}) Tj'
 
     def shape_text(self, text, font_size_pt, text_shaping_parms):
         """
         This method will invoke harfbuzz for text shaping, include the mapping code
         of the glyphs on the subset and map input characters to the cluster codes
         """
```

## fpdf/fpdf.py

```diff
@@ -2456,15 +2456,15 @@
         """
         if not self.font_family:
             raise FPDFException("No font set, you need to call set_font() beforehand")
         text = self.normalize_text(text)
         sl = [f"BT {x * self.k:.2f} {(self.h - y) * self.k:.2f} Td"]
         if self.text_mode != TextMode.FILL:
             sl.append(f" {self.text_mode} Tr {self.line_width:.2f} w")
-        sl.append(f"{self.current_font.encode_text(text)} ET")
+        sl.append(f"{self.current_font.encode_text(text, self.encode_error_handling)} ET")
         if (self.underline and text != "") or self._record_text_quad_points:
             w = self.get_string_width(text, normalized=True, markdown=False)
             if self.underline and text != "":
                 sl.append(self._do_underline(x, y, w))
             if self._record_text_quad_points:
                 h = self.font_size
                 y -= 0.8 * h  # same coefficient as in _render_styled_text_line()
```

## Comparing `reportbro_fpdf2-2.7.4.dist-info/LICENSE` & `reportbro_fpdf2-2.7.5.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `reportbro_fpdf2-2.7.4.dist-info/METADATA` & `reportbro_fpdf2-2.7.5.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: reportbro-fpdf2
-Version: 2.7.4
+Version: 2.7.5
 Summary: Simple & fast PDF generation for Python
 Home-page: https://www.reportbro.com
 Author: Olivier PLATHEY ported by Max
 Maintainer: Alex Hartmann
 Maintainer-email: alex@reportbro.com
 License: LGPLv3+
 Project-URL: Documentation, https://py-pdf.github.io/fpdf2/
```

## Comparing `reportbro_fpdf2-2.7.4.dist-info/RECORD` & `reportbro_fpdf2-2.7.5.dist-info/RECORD`

 * *Files 12% similar despite different names*

```diff
@@ -2,16 +2,16 @@
 fpdf/actions.py,sha256=RofeOa9YJMvGRlpQMX3ZzcRHCkXidK7D4uoRDXH9PC0,3547
 fpdf/annotations.py,sha256=w4XKvncVt-0Z8yk-SG6nhZgQ9CTovT-p7ebFhbAtFXU,5680
 fpdf/deprecation.py,sha256=57KcbnP9PF0nqF2nz0ryNwcq08OsAOXpmwgiaL9NCtI,2875
 fpdf/drawing.py,sha256=CSItzBd-vAgAoajenCLcdR3TBrr-Fe4-FIy0D21PRD8,148464
 fpdf/encryption.py,sha256=lK14yCwVk30NJb_oUYnsLj8ebxvRBOBCOedEiCW-mcg,21772
 fpdf/enums.py,sha256=cz6Q3crrSe6TsCWqPQUvres1YeNX7cN_7dHpxqMD2w8,27201
 fpdf/errors.py,sha256=GF9e_NiFtStGWbppjzf4ipijPIYlNrbZJYmjy1dXY6s,1760
-fpdf/fonts.py,sha256=RwGoQh6f5FkeXjrB4UWUDveHAIo9m9p2fUk1ILbzyfY,60115
-fpdf/fpdf.py,sha256=HaEprnS8_2SUFRpsP5oWe-gZIZklsd4D00Lk8T4tXq0,203631
+fpdf/fonts.py,sha256=f_bDc3L3OMiKaMnIZ204oCzyED2y-I4jFwSQC1UV9SM,60769
+fpdf/fpdf.py,sha256=bIVpwjugyvxaVOR-Zcr-FaFGG2SE-zPN96huN0hLDsU,203659
 fpdf/graphics_state.py,sha256=mxMfDX7W8xeXa5Z_yf1cfIdvdvINd2OBnRZvGG_I4qk,10420
 fpdf/html.py,sha256=gDSg0628cCJG7uqT1KquDeF9HbW2ekuXZ4ZCnnpBIrQ,31475
 fpdf/image_datastructures.py,sha256=k6DBYX7AEiSGJlyFTlYTuonCgvo9X65QD0HZkg6KBS4,2981
 fpdf/image_parsing.py,sha256=j6fkcA5NAIkQyqXatG0vYiYX_8iM1dDl7uUBAzsR9ss,21224
 fpdf/line_break.py,sha256=O-WSwM5nyTdjcqDPsIXwOteIm-lWODknSsuNy_sgHy0,24806
 fpdf/linearization.py,sha256=ruS7lBfapkxNPmiWyH0s_h5QlWCubWiFxle4MO0ep9c,12348
 fpdf/outline.py,sha256=CJ9Q3luMoOog-F3jhhn4JOxn-Har0-m3_7XXyFPQM00,3283
@@ -23,12 +23,12 @@
 fpdf/svg.py,sha256=pfTX-02Jt1jCH2mybrTxvR7w4h0HoQBKj8r0JD5-Hf8,37361
 fpdf/syntax.py,sha256=t-Umqt5pz51zVMLxYIRHNOCU0qeKIQPljcLPFxf7yQw,12044
 fpdf/table.py,sha256=eq7YHGd1SdGeiXFT5EG4-ob40Abg90AcW8-LxWduJOU,27900
 fpdf/template.py,sha256=Kqgf_Cjqk9Rhshwq-zBEh9ypXMS9WOgTbmxwTB-tSRg,22574
 fpdf/text_region.py,sha256=OGB5wMlbH_VIe3yC0T7sB3CGxBQWMBQsgm1aIRBgzYI,21895
 fpdf/transitions.py,sha256=gwXSHPm80e2mOgjMccdbJcqZPpYW-JixuuoFtvx-rv8,4446
 fpdf/util.py,sha256=FMLIlyioymPPrq8wAtPefTVZlFOghas4lgEwvMETiow,7851
-reportbro_fpdf2-2.7.4.dist-info/LICENSE,sha256=-XvEu5t66KZTlBBzZ4tcd3Xo3kSgHDvMIefNwUi5DmE,7632
-reportbro_fpdf2-2.7.4.dist-info/METADATA,sha256=6s3iS4EpOgPwsH22o6dcalcHghaCl3qzuknBI2EdY40,55176
-reportbro_fpdf2-2.7.4.dist-info/WHEEL,sha256=-G_t0oGuE7UD0DrSpVZnq1hHMBV9DD2XkS5v7XpmTnk,110
-reportbro_fpdf2-2.7.4.dist-info/top_level.txt,sha256=5LInphvlslEpMUNNFUFlIxUmargkp4k1WqQnoDBAF-w,5
-reportbro_fpdf2-2.7.4.dist-info/RECORD,,
+reportbro_fpdf2-2.7.5.dist-info/LICENSE,sha256=-XvEu5t66KZTlBBzZ4tcd3Xo3kSgHDvMIefNwUi5DmE,7632
+reportbro_fpdf2-2.7.5.dist-info/METADATA,sha256=D2gmykRSycty4veVrD4wHC80SbIn2si6YrQBrdo3uX4,55176
+reportbro_fpdf2-2.7.5.dist-info/WHEEL,sha256=-G_t0oGuE7UD0DrSpVZnq1hHMBV9DD2XkS5v7XpmTnk,110
+reportbro_fpdf2-2.7.5.dist-info/top_level.txt,sha256=5LInphvlslEpMUNNFUFlIxUmargkp4k1WqQnoDBAF-w,5
+reportbro_fpdf2-2.7.5.dist-info/RECORD,,
```

